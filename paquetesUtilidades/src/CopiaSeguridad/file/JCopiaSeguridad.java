/* * JCopiaSeguridad.java * * Created on 7 de octubre de 2004, 15:52 */package CopiaSeguridad.file;import java.io.*;import utiles.*;public class JCopiaSeguridad {        /** Creates a new instance of JCopiaSeguridad */    public JCopiaSeguridad() {    }        /**     * @param args the command line arguments     */    public static void main(String[] args) {        JDateEdu loDate = new JDateEdu();        try{            java.util.Locale.setDefault(new java.util.Locale("es", "ES"));            if((args[0]==null)||(args[1]==null)) {                System.out.println("Se necesitan dos path");                System.exit(1);            }            JGeneral.inicializar();            JGeneral.print("directorio origen " + args[0]);            JGeneral.print("directorio destino" + args[1]);                                    File loPath = new java.io.File(args[0]);            File loPathDest = new java.io.File(args[1]);            loPathDest.mkdir();            if(!((loPath.isDirectory())&&(loPathDest.isDirectory()) )){                JGeneral.print("Se necesitan dos path y deben existir");                System.exit(1);            }else{                JFicheroDirec loOrigen = new JFicheroDirec();                                JFicheroDirec loDestino = new JFicheroDirec();                JFicheroDirec loRef = new JFicheroDirec();                                loOrigen.setFichero(loPath);                loDestino.setFichero(loPathDest);                loRef.setFichero(loPathDest);                                int lTipo = JFicheroDirec.mclSegunFicheroFecha;                String lsPatrones = "";                boolean lbCoincide = true;                for(int i = 2; i<args.length; ) {                    lbCoincide = false;                    if(args[i].compareTo("-s") == 0 ){                        lTipo = JFicheroDirec.mclSobreescribir;                        i++;                        lbCoincide = true;                    }                    if(!lbCoincide)                        if(args[i].compareTo("-n") == 0 ){                            lTipo = JFicheroDirec.mclSinSobreescribir;                            i++;                            lbCoincide = true;                        }                    if(!lbCoincide)                        if(args[i].compareTo("-f") == 0 ){                            lTipo = JFicheroDirec.mclSegunFicheroFecha;                            i++;                            lbCoincide = true;                        }                    //ficheros a excluir ejem: *.tif;*.exe                    if(!lbCoincide)                        if((args[i].compareTo("-e") == 0)||(args[i].compareTo("-excluir") == 0 )){                            i++;                            lsPatrones = args[i];                            i++;                            lbCoincide = true;                        }                    //directorio de referencia                    if(!lbCoincide)                        if((args[i].compareTo("-r") == 0)||(args[i].compareTo("-referencia") == 0 )){                            i++;                            loRef.setFichero(new java.io.File(args[i]));                            if(!loRef.isDirectory())                                throw new Exception("El directorio de referencia debe ser directorio y existir");                            i++;                            lbCoincide = true;                        }                    if(!lbCoincide && !args[i].equals("")){                        throw new Exception("Opción no valida");                    }                    if(!lbCoincide){                        i++;                    }                                    }                                loOrigen.copiar(loDestino, lTipo, new JFicheroFiltro(lsPatrones, false), loRef);            }                    }catch(Exception e){            try{                e.printStackTrace();                JGeneral.print(e.toString());            }catch(Exception e2){}        }finally{            try{                JDateEdu loDate2 = new JDateEdu();                JGeneral.print("Tiempo: Intervalo: Desde " + loDate.toString() + " hasta " + loDate2.toString());                JGeneral.print("Tiempo: duración:  Segundos " + Double.toString(loDate.diff(loDate2.mclSegundos, loDate2, loDate)));                JGeneral.finalizar();            }catch(Exception e1){                e1.printStackTrace();            }        }    }}