/* * JFicheroFiltro.java * * Created on 9 de noviembre de 2004, 9:23 */package CopiaSeguridad.file;import java.io.*;public class JFicheroFiltro implements FilenameFilter {    private static JFicheroFiltro moFiltroNulo = null;    String[] masPatrones;    private boolean mbIncluir = false;    /** Creates a new instance of JFicheroFiltro */    public JFicheroFiltro(String psPatrones, boolean pbIncluir) {        int lCount = 0;        mbIncluir = pbIncluir;        psPatrones = psPatrones.replace('|',';');        psPatrones = psPatrones.replace('/',';');        psPatrones = psPatrones.replace(':',';');        for(int i = 0; i< psPatrones.length(); i++){            if(psPatrones.charAt(i) == ';') lCount++;        }        if((psPatrones.length()>0)&&(psPatrones.charAt(psPatrones.length()-1) != ';'))            lCount++;        masPatrones = new String[lCount];        lCount = 0;        int lAnterior=-1;        for(int i = 0; i< psPatrones.length(); i++){            if(psPatrones.charAt(i) == ';') {                masPatrones[lCount] = psPatrones.substring(lAnterior+1, i).toLowerCase();                lAnterior=i;                lCount++;            }            if ((i+1)==psPatrones.length()){                masPatrones[lCount] = psPatrones.substring(lAnterior+1, i+1).toLowerCase();            }        }        for(int i = 0; i< masPatrones.length; i++){            masPatrones[i]=masPatrones[i].replace("*", "");        }    }        public boolean accept(File dir, String name) {        for(int i = 0; i < masPatrones.length;i++) {            if(name.length()>=masPatrones[i].length()){                if(name.toLowerCase()                        .substring(name.length()-masPatrones[i].length(),name.length())                            .compareTo(masPatrones[i])==0)                    return mbIncluir;            }        }        return !mbIncluir;    }        public static JFicheroFiltro getFiltroNulo(){        if(moFiltroNulo==null)            moFiltroNulo = new JFicheroFiltro("", false);        return moFiltroNulo;    }    }